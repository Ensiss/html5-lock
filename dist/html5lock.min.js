function PatternLock(e,t){var n=Math.min(e.width,e.height),i=new Kinetic.Stage({container:e.container,width:n,height:n}),r=new Kinetic.Layer,o=new Kinetic.Rect({x:0,y:0,width:n,height:n});r.add(o);for(var a=!1,c=[],d=[],n=e.size,s=i.width()/n,g=0;n>g;g++)for(var h=0;n>h;h++){var u=new Kinetic.Circle({x:g*s+s/2,y:h*s+s/2,radius:s/2*.45|0,fill:"green",stroke:"black",strokeWidth:4,code:g+""+h});r.add(u),u.tween=new Kinetic.Tween({node:u,scaleX:2,scaleY:2,easing:Kinetic.Easings.EaseOut,duration:.8}),u.on("mouseover touchstart",function(e){if(e.target.tween.play(),a){for(g in c)if(c[g]==e.target)return;if(c.push(e.target),c.length>1){var t=c[c.length-1],n=c[c.length-2],i=new Kinetic.Line({points:[t.getX(),t.getY(),n.getX(),n.getY()],stroke:"red",strokeWidth:15,lineCap:"round",lineJoin:"round"});d.push(i),r.add(i)}}else c=[e.target]}),u.on("mouseout touchend",function(e){a||(e.target.tween.reverse(),c=[])})}i.on("mousedown",function(){a=!0}),i.on("mouseup",function(){a=!1;for(g in d)d[g].destroy();if(c.length>1){var e="SALT";for(g in c)e+=c[g].attrs.code;var n=CryptoJS.SHA256(e).toString(CryptoJS.enc.Hex);t(n)}for(g in c)c[g].tween.reverse();d=[],c=[]}),i.add(r)}